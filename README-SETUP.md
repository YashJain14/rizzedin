# RizzedIn Setup Guide

This guide will help you set up your RizzedIn dating platform with Clerk authentication (LinkedIn only) and Convex database.

## Prerequisites

- Node.js installed
- A Clerk account
- A Convex account

## Setup Steps

### 1. Install Dependencies

```bash
npm install
```

### 2. Set Up Clerk Authentication

1. Go to [Clerk Dashboard](https://dashboard.clerk.com)
2. Create a new application
3. **Configure LinkedIn OAuth:**
   - Go to "Social Connections" in your Clerk dashboard
   - Enable LinkedIn
   - Add your LinkedIn OAuth credentials (you'll need to create a LinkedIn app)
   - **Disable all other authentication methods** (email, phone, other social providers)
4. Copy your publishable key and secret key
5. In your Clerk dashboard, set the redirect URLs:
   - Sign-in redirect: `http://localhost:3000/onboarding`
   - Sign-up redirect: `http://localhost:3000/onboarding`

### 3. Set Up Convex Database

1. Run the following command to initialize Convex:
   ```bash
   npx convex dev
   ```
2. Follow the prompts to:
   - Log in to your Convex account (or create one)
   - Create a new project
   - The command will automatically generate your `.env.local` with Convex URLs

### 4. Configure Environment Variables

1. Copy `.env.example` to `.env.local`:
   ```bash
   cp .env.example .env.local
   ```

2. Fill in your environment variables in `.env.local`:
   - `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY`: From Clerk dashboard
   - `CLERK_SECRET_KEY`: From Clerk dashboard
   - `NEXT_PUBLIC_CONVEX_URL`: Auto-generated by `npx convex dev`
   - `CONVEX_DEPLOYMENT`: Auto-generated by `npx convex dev`

### 5. Configure Clerk with Convex

1. In your Clerk dashboard, go to "JWT Templates"
2. Create a new template called "convex"
3. Add the following claims:
   ```json
   {
     "aud": "convex"
   }
   ```

### 6. Run the Development Server

In one terminal, keep Convex running:
```bash
npx convex dev
```

In another terminal, start the Next.js dev server:
```bash
npm run dev
```

### 7. Configure LinkedIn OAuth (Important!)

To get LinkedIn profile data during authentication:

1. Go to [LinkedIn Developers](https://www.linkedin.com/developers/)
2. Create a new app
3. Request access to the following scopes:
   - `openid`
   - `profile`
   - `email`
4. Add authorized redirect URLs in LinkedIn app settings:
   - `https://[your-clerk-frontend-api].clerk.accounts.dev/v1/oauth_callback`
   - (You can find your Clerk frontend API in the Clerk dashboard)
5. Copy the Client ID and Client Secret to your Clerk dashboard (Social Connections â†’ LinkedIn)

## Database Schema

The user schema includes:

- **Onboarding fields:** `clerkId`, `linkedinUrl`, `age`, `gender`, `datingPreference`, `onboardingCompleted`
- **Profile fields (populated later via LinkedIn scraping):** `name`, `image`, `bio`, `about`, `experience[]`, `education[]`
- **Timestamp:** `timestamp`

## User Flow

1. User signs up/signs in with LinkedIn (only authentication method)
2. User is redirected to `/onboarding`
3. User completes onboarding form:
   - LinkedIn Profile URL (if not already obtained)
   - Age
   - Gender
   - Dating Preference
4. User profile is created in Convex
5. User is redirected to home page
6. Later, LinkedIn profile data will be scraped to populate additional fields

## Next Steps

- Implement LinkedIn profile scraping
- Build the main dating platform features
- Add profile matching logic

## Troubleshooting

### Convex Connection Issues
- Make sure `npx convex dev` is running
- Check that your `NEXT_PUBLIC_CONVEX_URL` is correct

### Clerk Authentication Issues
- Verify your Clerk keys are correct
- Make sure LinkedIn is the only enabled authentication method
- Check that redirect URLs are properly configured

### Onboarding Not Working
- Check browser console for errors
- Verify Convex functions are deployed (`npx convex dev` should show successful deployment)
